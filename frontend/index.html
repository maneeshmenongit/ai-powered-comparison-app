<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Hopwise App - Week 4 Enhancements -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hopwise ‚Äî Every stop matters. Hop smarter!</title>
    <meta name="description" content="Compare rides, discover food, explore activities. One app for smarter travel.">
    <meta name="theme-color" content="#FF8E53">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="./assets/hopwise-logo-cropped.png">
    <link rel="apple-touch-icon" href="./assets/hopwise-logo-cropped.png">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="./css/app.css">
    <link rel="stylesheet" href="./css/splash-onboarding.css">
</head>
<body>

<!-- Splash Screen & Onboarding -->
<div id="splash-screen" class="splash-screen">
    <div class="splash-background"></div>
    <div class="splash-content">
        <div class="splash-logo">
            <img src="./assets/hopwise-logo-cropped.png" alt="Hopwise">
        </div>
        <div class="splash-brand">Hopwise</div>
        <div class="splash-tagline">Every stop matters. Hop smarter!</div>

        <div class="splash-loader">
            <div class="loader-icon">‚úàÔ∏è</div>
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
            <div class="loader-text">Planning your journey...</div>
        </div>
    </div>
</div>

<div id="onboarding-container" class="onboarding-container">
    <button id="skip-btn" class="onboarding-skip" onclick="window.splashOnboarding.skipOnboarding()">Skip</button>

    <!-- Screen 1: Compare Rides -->
    <div id="onboarding-screen-1" class="onboarding-screen">
        <div class="onboarding-background" style="background-image: url('./assets/background/sticker_background_v1.png');"></div>
        <div class="onboarding-content">
            <div class="onboarding-icon">üöó</div>
            <h1 class="onboarding-title"><span class="highlight">Compare Rides</span> Instantly</h1>
            <p class="onboarding-description">Compare ride options from Uber and Lyft side-by-side. Find the best option for your trip.</p>
            <div class="onboarding-dots">
                <div class="dot active"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
            <div class="onboarding-actions">
                <button class="onboarding-btn onboarding-btn-primary" onclick="window.splashOnboarding.nextScreen()">Next</button>
            </div>
        </div>
    </div>

    <!-- Screen 2: Discover Places -->
    <div id="onboarding-screen-2" class="onboarding-screen">
        <div class="onboarding-background" style="background-image: url('./assets/background/sticker_background_v2.png');"></div>
        <div class="onboarding-content">
            <div class="onboarding-icon">üçΩÔ∏è</div>
            <h1 class="onboarding-title">Discover <span class="highlight">Great Places</span></h1>
            <p class="onboarding-description">Find top-rated restaurants, cafes, bars, and ice cream spots near you. Filter by cuisine, price, and more.</p>
            <div class="onboarding-dots">
                <div class="dot"></div>
                <div class="dot active"></div>
                <div class="dot"></div>
            </div>
            <div class="onboarding-actions">
                <button class="onboarding-btn onboarding-btn-primary" onclick="window.splashOnboarding.nextScreen()">Next</button>
            </div>
        </div>
    </div>

    <!-- Screen 3: Smarter Travel -->
    <div id="onboarding-screen-3" class="onboarding-screen">
        <div class="onboarding-background" style="background-image: url('./assets/background/sticker_background_v3.png');"></div>
        <div class="onboarding-content">
            <div class="onboarding-icon">üó∫Ô∏è</div>
            <h1 class="onboarding-title">One App. <span class="highlight">Smarter Travel.</span></h1>
            <p class="onboarding-description">Plan your entire journey in one place. Compare rides, discover food, explore activities‚Äîall seamlessly integrated.</p>
            <div class="onboarding-dots">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot active"></div>
            </div>
            <div class="onboarding-actions">
                <button class="onboarding-btn onboarding-btn-primary" onclick="window.splashOnboarding.finishOnboarding()">Get Started</button>
                <button class="onboarding-btn onboarding-btn-secondary" onclick="window.splashOnboarding.showSignIn()">Sign In</button>
            </div>
        </div>
    </div>
</div>

<div id="app" class="app">
    <div class="app-content">
    
    <!-- ========== PAGE: HOME ========== -->
    <div id="page-home" class="page">
        
        <!-- Header -->
        <header class="header-home">
            <div class="header-logo">
                <img src="./assets/hopwise-logo-cropped.png" alt="Hopwise">
                <span>Hopwise</span>
            </div>
            <div class="header-actions" id="home-header-actions">
                <button class="header-action">üîî</button>
                <button class="header-action" onclick="Hopwise.navigateTo('profile')">üë§</button>
            </div>
        </header>
        
        <!-- Greeting & Search -->
        <div class="section">
            <h1 id="home-greeting" class="text-2xl font-black mb-2">Good morning! üëã</h1>
            <p class="text-gray mb-4">Where to today?</p>
            
            <form class="search-form" onsubmit="Hopwise.handleSearch(event)">
                <div class="search-bar">
                    <span class="icon">üîç</span>
                    <input type="text" id="home-search" placeholder="Search restaurants, activities...">
                </div>
            </form>
        </div>
        
        <!-- Domain Tabs -->
        <div class="filter-scroll" id="domain-tabs">
            <button class="filter-chip active" data-filter="all">All</button>
            <button class="filter-chip" data-filter="rides">üöó Rides</button>
            <button class="filter-chip" data-filter="food">üçΩÔ∏è Food</button>
            <button class="filter-chip" data-filter="activities">üé° Activities</button>
            <button class="filter-chip" data-filter="stays">üè® Stays</button>
        </div>
        
        <!-- Trending Section -->
        <div class="section">
            <div class="section-header">
                <h2 class="section-title">üî• Trending Near You</h2>
                <a class="section-link" onclick="Hopwise.navigateTo('search')">See all ‚Üí</a>
            </div>
            <div class="scroll-container" id="trending-container">
                <!-- Loading skeletons - replaced by JS -->
                <div class="skeleton-card" style="min-width: 160px; height: 180px;">
                    <div class="skeleton skeleton-image" style="height: 100px;"></div>
                    <div style="padding: 12px;">
                        <div class="skeleton skeleton-text"></div>
                        <div class="skeleton skeleton-text sm"></div>
                    </div>
                </div>
                <div class="skeleton-card" style="min-width: 160px; height: 180px;">
                    <div class="skeleton skeleton-image" style="height: 100px;"></div>
                    <div style="padding: 12px;">
                        <div class="skeleton skeleton-text"></div>
                        <div class="skeleton skeleton-text sm"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Quick Rides Banner -->
        <div class="section">
            <div class="banner banner-ai" onclick="Hopwise.navigateTo('rides')">
                <span class="banner-icon banner-icon-img">
                    <img src="./assets/images/ride_icon_large.png" alt="Compare Rides" class="banner-ride-icon">
                </span>
                <div class="banner-content">
                    <div class="banner-title">Compare Rides Instantly</div>
                    <div class="banner-text">Uber vs Lyft ‚Äî compare your options (Demo)</div>
                </div>
            </div>
        </div>
        
        <!-- Top Activities -->
        <div class="section">
            <div class="section-header">
                <h2 class="section-title">‚≠ê Top Activities</h2>
                <a class="section-link" onclick="Hopwise.navigateTo('search', 'activities')">See all ‚Üí</a>
            </div>
            <div class="grid-2" id="activities-container">
                <!-- Loading skeletons -->
                <div class="skeleton-card"><div class="skeleton skeleton-image"></div><div style="padding: 12px;"><div class="skeleton skeleton-text"></div><div class="skeleton skeleton-text sm"></div></div></div>
                <div class="skeleton-card"><div class="skeleton skeleton-image"></div><div style="padding: 12px;"><div class="skeleton skeleton-text"></div><div class="skeleton skeleton-text sm"></div></div></div>
            </div>
        </div>
        
    </div>
    
    <!-- ========== PAGE: SEARCH RESULTS ========== -->
    <div id="page-search" class="page">
        
        <header class="header">
            <button class="header-back" onclick="Hopwise.goBack()">‚Üê</button>
            <form class="search-form" style="flex: 1;" onsubmit="Hopwise.handleSearch(event)">
                <div class="search-bar">
                    <span class="icon">üîç</span>
                    <input type="text" id="search-input" placeholder="Search...">
                </div>
            </form>
            <button class="header-action">‚öôÔ∏è</button>
        </header>
        
        <!-- Category Filters -->
        <div class="filter-scroll" id="category-chips">
            <button class="filter-chip active" data-category="Food">üçΩÔ∏è Food</button>
            <button class="filter-chip" data-category="Drinks">üç∏ Drinks</button>
            <button class="filter-chip" data-category="Ice Cream">üç¶ Ice Cream</button>
            <button class="filter-chip" data-category="Cafe">‚òï Cafe</button>
        </div>

        <!-- Sort Filters -->
        <div class="filter-scroll" id="filter-chips">
            <button class="filter-chip" data-filter="price">üí∞ Price</button>
            <button class="filter-chip" data-filter="rating">‚≠ê Rating</button>
            <button class="filter-chip" data-filter="distance">üìç Distance</button>
            <button class="filter-chip" data-filter="open">üïê Open Now</button>
        </div>
        
        <!-- Results Header -->
        <div class="section" style="padding-bottom: 0;">
            <div class="flex justify-between items-center">
                <span id="results-count" class="text-sm font-bold text-gray">Loading...</span>
                <div class="flex gap-2">
                    <button class="btn btn-sm btn-secondary">üìç List</button>
                    <button class="btn btn-sm btn-outline">üó∫Ô∏è Map</button>
                </div>
            </div>
        </div>
        
        <!-- AI Recommendation -->
        <div class="section" style="padding-top: 12px; padding-bottom: 0;">
            <div class="banner banner-ai">
                <span class="banner-icon">üí°</span>
                <div class="banner-content">
                    <div class="banner-title">Top Pick for You</div>
                    <div class="banner-text">Based on your preferences and reviews</div>
                </div>
            </div>
        </div>
        
        <!-- Results List -->
        <div class="section">
            <div class="list" id="search-results">
                <!-- Populated by JS -->
            </div>
        </div>
        
    </div>
    
    <!-- ========== PAGE: DETAIL ========== -->
    <div id="page-detail" class="page">
        <div id="detail-container">
            <!-- Populated by JS -->
        </div>
    </div>
    
    <!-- ========== PAGE: RIDES COMPARISON ========== -->
    <div id="page-rides" class="page">

        <header class="header">
            <button class="header-back" onclick="Hopwise.goBack()">‚Üê</button>
            <h1 class="header-title">Compare Rides</h1>
        </header>

        <!-- DEMO MODE DISCLAIMER -->
        <div class="section" style="padding-top: 16px; padding-bottom: 0;">
            <div style="background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%); border-left: 4px solid #FF9800; border-radius: 12px; padding: 16px; margin-bottom: 8px;">
                <div style="display: flex; align-items: start; gap: 12px;">
                    <div style="font-size: 24px; line-height: 1;">üß™</div>
                    <div style="flex: 1;">
                        <div style="font-weight: 800; font-size: 14px; color: #E65100; margin-bottom: 4px;">DEMO MODE</div>
                        <div style="font-size: 13px; color: #424242; line-height: 1.4;">
                            Sample pricing shown for demonstration only.<br>
                            <strong>Real-time Uber & Lyft pricing launching soon!</strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Route Card -->
        <div class="section" style="padding-top: 0;">
            <div class="info-card">
                <div class="info-row" style="cursor: pointer; position: relative;">
                    <div class="info-row-icon" style="background: #D1FAE5;">üìç</div>
                    <div class="info-row-content" onclick="editRideLocation('pickup')" style="flex: 1;">
                        <div class="info-row-label">Pickup</div>
                        <div class="info-row-value" id="ride-pickup">Times Square, NYC</div>
                    </div>
                    <button onclick="useCurrentLocation()" class="current-location-btn" title="Use my current location" style="background: var(--color-sunset-orange); color: white; border: none; border-radius: 8px; padding: 8px 12px; font-size: 12px; font-weight: 600; cursor: pointer; margin-right: 8px;">üìç Current</button>
                    <span class="info-row-action" onclick="editRideLocation('pickup')" style="cursor: pointer;">‚úé</span>
                </div>
                <div class="info-row" onclick="editRideLocation('destination')" style="cursor: pointer;">
                    <div class="info-row-icon" style="background: #FEE2E2;">üéØ</div>
                    <div class="info-row-content">
                        <div class="info-row-label">Destination</div>
                        <div class="info-row-value" id="ride-destination">JFK Airport Terminal 4</div>
                    </div>
                    <span class="info-row-action">‚úé</span>
                </div>
            </div>
        </div>
        
        <!-- Trip Stats -->
        <div class="section" style="padding-top: 8px; padding-bottom: 8px;">
            <div style="display: flex; justify-content: space-around; gap: 12px; background: linear-gradient(135deg, #FFF5EB 0%, #FFF9F0 100%); border-radius: 16px; padding: 20px; box-shadow: 0 2px 8px rgba(255, 142, 83, 0.1);">
                <div class="text-center" style="flex: 1;">
                    <div class="font-black text-2xl" id="ride-distance" style="color: var(--color-sunset-orange);">18.5 mi</div>
                    <div class="text-xs text-gray" style="margin-top: 4px; font-weight: 600;">Distance</div>
                </div>
                <div style="width: 1px; background: linear-gradient(180deg, transparent, rgba(0,0,0,0.1), transparent);"></div>
                <div class="text-center" style="flex: 1;">
                    <div class="font-black text-2xl" id="ride-time" style="color: var(--color-sunset-orange);">42 min</div>
                    <div class="text-xs text-gray" style="margin-top: 4px; font-weight: 600;">Est. Time</div>
                </div>
                <div style="width: 1px; background: linear-gradient(180deg, transparent, rgba(0,0,0,0.1), transparent);"></div>
                <div class="text-center" style="flex: 1;">
                    <div class="font-black text-2xl text-success" id="ride-savings">$7</div>
                    <div class="text-xs text-gray" style="margin-top: 4px; font-weight: 600;">You Save</div>
                </div>
            </div>
        </div>
        
        <!-- AI Banner -->
        <div class="section" style="padding-top: 12px;">
            <div class="banner banner-ai" id="ride-recommendation">
                <span class="banner-icon">üí°</span>
                <div class="banner-content">
                    <div class="banner-title">Uber X is your best bet!</div>
                    <div class="banner-text">$7 cheaper than Lyft with similar pickup time.</div>
                </div>
            </div>
        </div>
        
        <!-- Ride Options -->
        <div class="section" style="padding-bottom: 120px;">
            <div class="list" id="rides-container">
                <!-- Populated by JS -->
            </div>
            
            <!-- Promo Banner -->
            <div class="banner banner-promo mt-4">
                <span class="banner-icon">üéÅ</span>
                <div class="banner-content">
                    <div class="banner-title">Save 20% with code HOPWISE20</div>
                    <div class="banner-text">Apply to your next Uber ride</div>
                </div>
            </div>
        </div>
        
        <!-- Bottom CTA (Fixed) -->
        <div style="position: fixed; bottom: 72px; left: 50%; transform: translateX(-50%); width: 100%; max-width: 430px; padding: 16px; background: white; border-top: 1px solid var(--color-gray-200); z-index: 150; box-shadow: 0 -4px 12px rgba(0,0,0,0.08);">
            <button id="book-ride-btn" class="btn btn-primary btn-lg btn-block">Book Uber X ‚Ä¢ $45</button>
            <p class="text-center text-xs text-gray mt-2">Opens Uber app to complete booking</p>
        </div>
        
    </div>
    
    <!-- ========== PAGE: SAVED ========== -->
    <div id="page-saved" class="page">
        
        <div class="section">
            <h1 class="text-2xl font-black mb-1">Saved ‚ù§Ô∏è</h1>
            <p class="text-gray">Your favorite places & routes</p>
        </div>
        
        <!-- Category Tabs -->
        <div class="filter-scroll" id="saved-tabs">
            <button class="filter-chip active">All <span class="count">12</span></button>
            <button class="filter-chip">üçΩÔ∏è Food <span class="count">6</span></button>
            <button class="filter-chip">üç∏ Drinks <span class="count">2</span></button>
            <button class="filter-chip">üé° Activities <span class="count">3</span></button>
            <button class="filter-chip">üöó Routes <span class="count">1</span></button>
        </div>
        
        <!-- Saved Items -->
        <div class="section" id="saved-container">
            <!-- Populated by JS or shows empty state -->
        </div>
        
    </div>
    
    <!-- ========== PAGE: PROFILE ========== -->
    <div id="page-profile" class="page">

        <!-- Profile Header -->
        <div class="section text-center" style="background: white; padding-bottom: 24px;">
            <div class="profile-avatar" id="profile-avatar">
                <span id="profile-avatar-text">A</span>
            </div>
            <h1 class="text-xl font-black" id="profile-name">Loading...</h1>
            <p class="text-sm text-gray" id="profile-email">Loading...</p>
            <div class="profile-badge" id="profile-badge" style="display: none;">
                <span class="badge-icon">üëë</span>
                <span class="badge-text">Premium</span>
            </div>
        </div>

        <!-- Stats -->
        <div class="profile-stats">
            <div class="stat-card">
                <div class="stat-icon">üó∫Ô∏è</div>
                <div class="stat-value" id="stat-trips">0</div>
                <div class="stat-label">Trips</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">‚ù§Ô∏è</div>
                <div class="stat-value" id="stat-saved">0</div>
                <div class="stat-label">Saved</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üí∞</div>
                <div class="stat-value" id="stat-savings">$0</div>
                <div class="stat-label">Saved</div>
            </div>
        </div>

        <!-- Premium Banner -->
        <div class="section" id="premium-banner-section">
            <div class="premium-banner" onclick="showToast('Premium features coming soon!', 'info')">
                <div class="premium-icon">
                    <span>üëë</span>
                </div>
                <div class="premium-content">
                    <div class="premium-title">Upgrade to Premium</div>
                    <div class="premium-subtitle">Unlock AI trip planning & unlimited saves</div>
                </div>
                <div class="premium-arrow">‚Üí</div>
            </div>
        </div>

        <!-- Menu: Account -->
        <div class="section" style="padding-top: 0;">
            <div class="profile-menu">
                <div class="menu-section-title">Account</div>

                <div class="menu-item" onclick="showToast('Edit profile coming soon!', 'info')">
                    <div class="menu-item-icon">üë§</div>
                    <div class="menu-item-content">
                        <div class="menu-item-title">Edit Profile</div>
                        <div class="menu-item-subtitle">Update your information</div>
                    </div>
                    <span class="menu-item-arrow">‚Ä∫</span>
                </div>

                <div class="menu-item" onclick="showToast('Payment methods coming soon!', 'info')">
                    <div class="menu-item-icon">üí≥</div>
                    <div class="menu-item-content">
                        <div class="menu-item-title">Payment Methods</div>
                        <div class="menu-item-subtitle">Manage your cards</div>
                    </div>
                    <span class="menu-item-arrow">‚Ä∫</span>
                </div>

                <div class="menu-item" onclick="toggleNotifications(this)">
                    <div class="menu-item-icon">üîî</div>
                    <div class="menu-item-content">
                        <div class="menu-item-title">Notifications</div>
                        <div class="menu-item-subtitle">Push notifications enabled</div>
                    </div>
                    <div class="toggle-switch active" data-enabled="true">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Menu: Preferences -->
        <div class="section" style="padding-top: 0;">
            <div class="profile-menu">
                <div class="menu-section-title">Preferences</div>

                <div class="menu-item" onclick="showToast('Location settings coming soon!', 'info')">
                    <div class="menu-item-icon">üìç</div>
                    <div class="menu-item-content">
                        <div class="menu-item-title">Home Location</div>
                        <div class="menu-item-subtitle" id="home-location">Not set</div>
                    </div>
                    <span class="menu-item-arrow">‚Ä∫</span>
                </div>

                <div class="menu-item" onclick="toggleDarkMode(this)">
                    <div class="menu-item-icon">üåô</div>
                    <div class="menu-item-content">
                        <div class="menu-item-title">Dark Mode</div>
                        <div class="menu-item-subtitle">Coming soon</div>
                    </div>
                    <div class="toggle-switch" data-enabled="false">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Menu: Support -->
        <div class="section" style="padding-top: 0;">
            <div class="profile-menu">
                <div class="menu-section-title">Support</div>

                <div class="menu-item" onclick="window.open('mailto:support@hopwise.app', '_blank')">
                    <div class="menu-item-icon">‚ùì</div>
                    <div class="menu-item-content">
                        <div class="menu-item-title">Help Center</div>
                        <div class="menu-item-subtitle">Get support</div>
                    </div>
                    <span class="menu-item-arrow">‚Ä∫</span>
                </div>

                <div class="menu-item" onclick="window.open('mailto:hello@hopwise.app', '_blank')">
                    <div class="menu-item-icon">üí¨</div>
                    <div class="menu-item-content">
                        <div class="menu-item-title">Contact Us</div>
                        <div class="menu-item-subtitle">hello@hopwise.app</div>
                    </div>
                    <span class="menu-item-arrow">‚Ä∫</span>
                </div>

                <div class="menu-item" onclick="showToast('Version 1.0.0 - Latest', 'success')">
                    <div class="menu-item-icon">‚ÑπÔ∏è</div>
                    <div class="menu-item-content">
                        <div class="menu-item-title">About</div>
                        <div class="menu-item-subtitle">Version 1.0.0</div>
                    </div>
                    <span class="menu-item-arrow">‚Ä∫</span>
                </div>
            </div>
        </div>

        <!-- Logout -->
        <div class="section" style="padding-top: 0; padding-bottom: 100px;">
            <button class="logout-button" onclick="handleLogout()">
                <span class="logout-icon">üö™</span>
                <span class="logout-text">Log Out</span>
            </button>
        </div>

    </div>

    <!-- ========== PAGE: LOGIN ========== -->
    <div id="page-login" class="page">

        <!-- Header -->
        <header class="header">
            <button class="header-back" onclick="Hopwise.goBack()">‚Üê</button>
            <h2 class="header-title">Log In</h2>
            <div style="width: 40px;"></div>
        </header>

        <!-- Login Form -->
        <div class="section">
            <div style="text-align: center; margin-bottom: 32px;">
                <div class="auth-logo-container">
                    <img src="./assets/hopwise-logo-cropped.png" alt="Hopwise" class="auth-logo">
                </div>
                <h1 class="text-xl font-black mb-2">Welcome back!</h1>
                <p class="text-gray">Log in to access your saved places and trip plans</p>
            </div>

            <form id="login-form" onsubmit="handleLogin(event)" style="background: white; padding: 24px; border-radius: 20px;">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" id="login-email" class="form-input" placeholder="your@email.com" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" id="login-password" class="form-input" placeholder="Enter your password" required minlength="8">
                </div>

                <div id="login-error" class="error-message" style="display: none;"></div>

                <button type="submit" class="btn btn-primary btn-block" id="login-submit-btn">
                    Log In
                </button>

                <div style="text-align: center; margin-top: 16px;">
                    <a href="#" onclick="event.preventDefault(); Hopwise.navigateTo('register')" style="color: var(--color-sunset-red); text-decoration: none; font-weight: 600;">
                        Don't have an account? Sign up
                    </a>
                </div>
            </form>

            <div style="text-align: center; margin-top: 24px;">
                <a href="#" onclick="event.preventDefault(); Hopwise.navigateTo('home')" style="color: var(--color-gray-500); text-decoration: none; font-size: 14px;">
                    Continue as guest ‚Üí
                </a>
            </div>
        </div>

    </div>

    <!-- ========== PAGE: REGISTER ========== -->
    <div id="page-register" class="page">

        <!-- Header -->
        <header class="header">
            <button class="header-back" onclick="Hopwise.goBack()">‚Üê</button>
            <h2 class="header-title">Sign Up</h2>
            <div style="width: 40px;"></div>
        </header>

        <!-- Registration Form -->
        <div class="section">
            <div style="text-align: center; margin-bottom: 32px;">
                <div class="auth-logo-container">
                    <img src="./assets/hopwise-logo-cropped.png" alt="Hopwise" class="auth-logo">
                </div>
                <h1 class="text-xl font-black mb-2">Join Hopwise!</h1>
                <p class="text-gray">Create an account to save places and plan trips</p>
            </div>

            <form id="register-form" onsubmit="handleRegister(event)" style="background: white; padding: 24px; border-radius: 20px;">
                <div class="form-group">
                    <label class="form-label">Username</label>
                    <input type="text" id="register-username" class="form-input" placeholder="johndoe" required minlength="3">
                </div>

                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" id="register-email" class="form-input" placeholder="your@email.com" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" id="register-password" class="form-input" placeholder="Min 8 characters" required minlength="8">
                    <p class="text-xs text-gray" style="margin-top: 4px;">Must be at least 8 characters long</p>
                </div>

                <div id="register-error" class="error-message" style="display: none;"></div>

                <button type="submit" class="btn btn-primary btn-block" id="register-submit-btn">
                    Create Account
                </button>

                <div style="text-align: center; margin-top: 16px;">
                    <a href="#" onclick="event.preventDefault(); Hopwise.navigateTo('login')" style="color: var(--color-sunset-red); text-decoration: none; font-weight: 600;">
                        Already have an account? Log in
                    </a>
                </div>
            </form>

            <div style="text-align: center; margin-top: 24px;">
                <a href="#" onclick="event.preventDefault(); Hopwise.navigateTo('home')" style="color: var(--color-gray-500); text-decoration: none; font-size: 14px;">
                    Continue as guest ‚Üí
                </a>
            </div>
        </div>

    </div>

    </div><!-- /app-content -->

    <!-- ========== BOTTOM NAVIGATION ========== -->
    <nav id="bottom-nav" class="bottom-nav">
        <button class="nav-item active" data-page="home">
            <span class="icon icon-img">
                <img src="./assets/images/home_icon.png" alt="Home" class="nav-icon-image">
            </span>
            <span>Home</span>
        </button>
        <button class="nav-item" data-page="search">
            <span class="icon icon-img">
                <img src="./assets/images/search_icon.png" alt="Search" class="nav-icon-image">
            </span>
            <span>Search</span>
        </button>
        <button class="nav-item" data-page="rides">
            <span class="icon icon-img">
                <img src="./assets/images/ride_icon.png" alt="Rides" class="nav-icon-image">
            </span>
            <span>Rides</span>
        </button>
        <button class="nav-item" data-page="saved">
            <span class="icon icon-img">
                <img src="./assets/images/favorite_icon.png" alt="Saved" class="nav-icon-image">
            </span>
            <span>Saved</span>
        </button>
        <button class="nav-item" data-page="profile">
            <span class="icon icon-img">
                <img src="./assets/images/profile_icon.png" alt="Profile" class="nav-icon-image">
            </span>
            <span>Profile</span>
        </button>
    </nav>
    
</div><!-- /app -->

<!-- Loading Overlay -->
<div id="loading-overlay" class="loading-overlay hidden">
    <div class="spinner spinner-lg"></div>
    <p class="loading-text">Loading...</p>
</div>

<!-- Scripts -->
<script>
// Define API_BASE_URL globally BEFORE loading other scripts
window.API_BASE_URL = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
    ? 'http://localhost:5001/api'
    : 'https://api.hopwise.app/api';

console.log('üåê API Base URL:', window.API_BASE_URL);
</script>
<script src="./js/splash-onboarding.js"></script>
<script src="./js/auth.js"></script>
<script src="./js/hopwise-api.js"></script>
<script src="./js/app.js"></script>
<script>
// Load configuration from backend (API keys, GA4, etc.)
const API_BASE_URL = window.API_BASE_URL;

fetch(`${API_BASE_URL}/config`)
    .then(res => res.json())
    .then(config => {
        // Load Google Maps API
        if (config.google_maps_api_key) {
            const mapsScript = document.createElement('script');
            mapsScript.src = `https://maps.googleapis.com/maps/api/js?key=${config.google_maps_api_key}&libraries=places&callback=initAutocomplete`;
            mapsScript.async = true;
            mapsScript.defer = true;
            document.head.appendChild(mapsScript);
        }

        // Load Google Analytics GA4
        if (config.ga_measurement_id) {
            // Load gtag.js script
            const gtagScript = document.createElement('script');
            gtagScript.src = `https://www.googletagmanager.com/gtag/js?id=${config.ga_measurement_id}`;
            gtagScript.async = true;
            document.head.appendChild(gtagScript);

            // Initialize GA4
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', config.ga_measurement_id);

            // Make gtag globally available
            window.gtag = gtag;
        }
    })
    .catch(err => console.error('Failed to load API config:', err));
</script>

</body>
</html>
